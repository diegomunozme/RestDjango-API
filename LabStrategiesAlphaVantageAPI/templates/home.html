<!DOCTYPE html>
<html>
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>Stock Visualizer</title>
    <style>
        #stock-info {
            display: flex;
            flex-wrap: wrap;
        }
        .stock-card {
            flex: 1 1 20%;
            box-sizing: border-box;
            padding: 10px;
            margin: 5px;
            border: 1px solid #ccc;
            text-align: center;
            font-size: 14px;
        }
        .positive {
            background-color: #e0ffe0; /* light green */
        }
        .negative {
            background-color: #ffe0e0; /* light red */
        }
        h2 {
            font-size: 18px;
        }
        h3 {
            font-size: 14px;
            margin: 5px 0;
        }
    </style>
</head>

<body>
<h2>Interactive Stock Visualizer</h2>
<br>

<label for="ticker-input">Enter Symbols (comma separated):</label>
<input type="text" id="ticker-input">
<input type="button" value="submit" id="submit-btn">
<br>
<div>
    <div id="stock-info"></div>
</div>
<br>

<script>
    function displayStockData(data) {
        $('#stock-info').empty();
        data.forEach(stock => {
            const isPositive = parseFloat(stock.price) > parseFloat(stock.previous_close);
            const cardClass = isPositive ? 'positive' : 'negative';
            $('#stock-info').append(`
                <div class="stock-card ${cardClass}">
                    <h3>Symbol: ${stock.symbol}</h3>
                    <h3>Current Price: $${stock.price}</h3>
                    <h3>Previous Close: $${stock.previous_close}</h3>
                    <h3>Latest Trading Day: ${stock.latest_trading_day}</h3>
                </div>
            `);
        });
    }

    $(document).ready(function(){
        $.ajax({
            type: "GET",
            url: "/get_stock_data/AAPL/",
            success: function (res, status) {
                displayStockData([res]);
            }
        });
    });

    $('#submit-btn').click(function() {
        var tickerText = $('#ticker-input').val().replace(/\s+/g, '');
        $.ajax({
            type: "GET",
            url: `/get_multiple_stock_data/${tickerText}/`,
            success: function (res, status) {
                displayStockData(res);
            }
        });
    });
</script>

</body>
</html>
